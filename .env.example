# ================================
# 環境変数設定例
# ================================
# このファイルを .env にコピーして使用してください
# cp .env.example api/.env
# cp .env.example web/.env.local

# ================================
# 共通設定
# ================================
NODE_ENV=development
# production | development | test

# ================================
# Supabase設定（必須）
# ================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-role-key
# Supabaseダッシュボード > Settings > API から取得

# ================================
# Twilio設定（本番必須）
# ================================
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_PHONE_NUMBER=+81xxxxxxxxxx
# 日本の050番号など

TWILIO_WEBHOOK_URL=https://your-domain.com/webhooks/twilio
# 本番環境のWebhook URL（ngrokやローカルの場合は http://localhost:3000/webhooks/twilio）

TWILIO_WEBHOOK_SECRET=your-webhook-secret
# Twilio Console > Phone Numbers > Webhook設定で生成される署名検証用シークレット

# ================================
# Stripe設定（本番必須）
# ================================
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxx
# Stripe Dashboard > Developers > API keys から取得
# Webhook secretは Webhooks > Signing secret から取得

# 価格ID（Stripe Dashboard > Products から取得）
STRIPE_PRICE_ID_PERSONAL_MONTHLY=price_xxxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_ID_PERSONAL_YEARLY=price_xxxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_ID_FAMILY_MONTHLY=price_xxxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_ID_FAMILY_YEARLY=price_xxxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_ID_COMMUNITY_MONTHLY=price_xxxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_ID_BUSINESS_MONTHLY=price_xxxxxxxxxxxxxxxxxxxxxx

# ================================
# LINE設定（オプション）
# ================================
LINE_CHANNEL_ACCESS_TOKEN=xxxxxxxxxxxxxxxxxxxxxx
LINE_CHANNEL_SECRET=xxxxxxxxxxxxxxxxxxxxxx
# LINE Developers Console > Channel設定 から取得

LINE_LIFF_ID=xxxxxxxxxxxxxxxxxxxxxx
# LIFF（LINE Front-end Framework）を使用する場合

# ================================
# 気象API設定
# ================================
WEATHER_API_KEY=xxxxxxxxxxxxxxxxxxxxxx
# OpenWeatherMap等のAPIキー（使用する場合）

# ================================
# ジョブ設定
# ================================
# アラート送信時間窓（カンマ区切りで時間を指定）
ALERT_WINDOWS=9,13,17
# 例: 9時、13時、17時にアラート送信

# 静穏時間（この時間帯はアラート送信しない）
QUIET_HOURS=22-7
# 例: 22時から翌7時まではアラート送信しない

# ジョブ実行間隔（分）
JOB_INTERVAL_MINUTES=5

# ================================
# ログ設定
# ================================
LOG_LEVEL=info
# debug | info | warn | error

LOG_FORMAT=json
# json | text

# ================================
# セキュリティ設定
# ================================
# 開発環境でのみ有効にする設定
ALLOW_ANON_WRITE=false
# true: 開発環境で匿名書き込みを許可
# false: 本番環境では必ずfalse

# CORS設定
CORS_ORIGIN=http://localhost:3001
# 本番: https://your-domain.com

# ================================
# Next.js（Web）専用設定
# ================================
NEXT_PUBLIC_API_URL=http://localhost:3000
# APIサーバーのURL
# 本番: https://api.your-domain.com

NEXT_PUBLIC_SUPABASE_URL=${SUPABASE_URL}
NEXT_PUBLIC_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
# クライアント側で使用するSupabase設定

NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
# クライアント側で使用するStripe公開キー

# ================================
# 開発環境用設定
# ================================
# モックデータを使用
USE_MOCK_WEATHER=false
USE_MOCK_TWILIO=false

# デバッグモード
DEBUG=false

# ================================
# 注意事項
# ================================
# 1. 本番環境では必ず以下を設定してください：
#    - NODE_ENV=production
#    - ALLOW_ANON_WRITE=false
#    - 正しいWebhook URLとシークレット
#
# 2. シークレットキーは絶対にGitにコミットしないでください
#
# 3. 本番環境の環境変数は以下で管理することを推奨：
#    - Vercel: Environment Variables
#    - AWS: Systems Manager Parameter Store
#    - その他: .env.production.local（.gitignore済み）